---
// Component imports
import Button from "../components/Button.astro";

import "../styles/components/header.scss";
---

<header>
  <div class="header-wrapper container">
    <a href="/" aria-label="Home">
      <svg
        class="logo"
        xmlns="http://www.w3.org/2000/svg"
        width="135"
        height="37"
        fill="none"
      >
        <path
          fill="#D59940"
          d="M45.447 26.3H41.43V10.573h4.48c1.754 0 2.985.086 3.694.258.71.172 1.311.466 1.805.881.58.48 1.02 1.082 1.321 1.805.308.716.462 1.514.462 2.395 0 .938-.15 1.766-.45 2.482a4.319 4.319 0 0 1-1.333 1.75c-.444.345-.967.592-1.568.742-.602.15-1.565.226-2.89.226h-1.504V26.3Zm0-8.647h.817c1.03 0 1.75-.14 2.159-.42.408-.286.612-.77.612-1.45 0-.658-.2-1.127-.601-1.407-.401-.28-1.11-.419-2.127-.419h-.86v3.696ZM62.99 20.864c0-.845-.226-1.514-.678-2.008-.45-.494-1.067-.742-1.847-.742s-1.397.248-1.848.742c-.444.487-.666 1.156-.666 2.008 0 .845.226 1.512.677 1.998.451.488 1.063.731 1.837.731.78 0 1.396-.244 1.847-.73.452-.487.677-1.154.677-1.998Zm3.361-5.414V26.3H62.84v-1.762c-.502.752-1.067 1.304-1.697 1.655-.623.35-1.358.526-2.203.526-1.446 0-2.603-.526-3.47-1.58-.866-1.059-1.3-2.477-1.3-4.253 0-1.769.452-3.173 1.354-4.211.91-1.046 2.13-1.568 3.663-1.568.817 0 1.519.175 2.106.526.594.344 1.103.877 1.525 1.6V15.45h3.535ZM77.03 19.017c-.373-.33-.731-.57-1.075-.72a2.677 2.677 0 0 0-1.085-.226c-.76 0-1.364.251-1.815.752-.444.502-.666 1.182-.666 2.041 0 .831.232 1.494.698 1.988.465.494 1.092.741 1.88.741.386 0 .748-.075 1.085-.226.343-.157.67-.397.977-.72v3.32a5.501 5.501 0 0 1-2.793.752c-1.668 0-3.022-.534-4.06-1.6-1.032-1.075-1.547-2.486-1.547-4.233 0-1.697.526-3.083 1.579-4.157 1.06-1.082 2.417-1.622 4.071-1.622.552 0 1.05.053 1.493.16.444.108.863.28 1.257.516v3.234ZM79.973 26.3v-8.143H78.35V15.45h1.623v-3.233h3.77v3.233h1.622v2.707h-1.622V26.3h-3.77ZM99.695 26.3h-13.9l7.938-12.321h-6.37v-3.405h13.235l-7.917 12.3h7.014V26.3ZM101.962 12.067c0-.58.204-1.075.612-1.483a2.056 2.056 0 0 1 1.493-.612c.602 0 1.103.2 1.504.601.408.402.613.9.613 1.494s-.208 1.099-.624 1.514a2.012 2.012 0 0 1-1.493.623c-.573 0-1.067-.21-1.482-.634a2.074 2.074 0 0 1-.623-1.503Zm.193 14.233V15.45h3.835V26.3h-3.835ZM116.625 20.907c0-.809-.204-1.446-.612-1.912-.409-.465-.96-.698-1.655-.698-.701 0-1.256.233-1.665.698-.401.466-.601 1.103-.601 1.912 0 .81.2 1.447.601 1.913.401.458.956.687 1.665.687.702 0 1.254-.23 1.655-.687.408-.466.612-1.103.612-1.913Zm3.803 0c0 .781-.154 1.522-.462 2.224a5.752 5.752 0 0 1-1.322 1.89 6.056 6.056 0 0 1-1.976 1.268 6.215 6.215 0 0 1-2.31.43c-.83 0-1.611-.143-2.341-.43a5.846 5.846 0 0 1-1.945-1.267 5.59 5.59 0 0 1-1.31-1.87 5.686 5.686 0 0 1-.452-2.245c0-.794.147-1.543.441-2.245a5.764 5.764 0 0 1 1.321-1.89 5.672 5.672 0 0 1 1.934-1.246 6.526 6.526 0 0 1 2.352-.42c.838 0 1.619.14 2.342.42a5.78 5.78 0 0 1 1.944 1.246 5.798 5.798 0 0 1 1.333 1.901c.3.702.451 1.447.451 2.235ZM122.63 26.3V15.45h3.502v2.203c.508-.881 1.095-1.526 1.761-1.934.667-.408 1.465-.612 2.396-.612.702 0 1.325.114 1.869.343.552.222.999.545 1.343.967.286.365.49.81.612 1.332.122.523.183 1.304.183 2.342V26.3h-3.835v-5.812c0-.866-.143-1.496-.43-1.89-.279-.394-.73-.59-1.353-.59-.795 0-1.375.293-1.741.88-.365.587-.547 1.54-.547 2.857V26.3h-3.76ZM28.797 5.675 23.862.377H17.21v5.176h-5.19V.377H5.903L0 6.142v24.89l5.724 5.591h17.732l5.775-5.64V6.142l-.437-.467h.003ZM22.38 7.714v8.82H6.856v-8.82H22.38Zm0 21.575H6.856v-8.821H22.38v8.82Z"
        ></path>
      </svg>
    </a>

    <div class="nav-menu">
      <nav>
        <ul role="list" class="nav-links">
          <li class="nav-link" style="--i: 0">
            <a href="/" class="active" aria-label="Home" data-page="home"
              >Home</a
            >
          </li>
          <li class="nav-link" style="--i: 2">
            <a href="/about" aria-label="About" data-page="about">About</a>
          </li>
          <li class="nav-link dropdown" style="--i: 1">
            <a href="#" aria-label="Products" data-page="products">Products</a>
            <div class="dropdown-menu">
              <a href="/products/exports" aria-label="Exports">Exports</a>
              <a href="/products/changan" aria-label="Changan">Changan</a>
              <!-- <a href="/waiting" aria-label="Real Estate">Real Estate</a> -->
            </div>
          </li>
          <li class="nav-link" style="--i: 3">
            <a href="/waiting" aria-label="Articles" data-page="articles"
              >Articles</a
            >
          </li>

          <li class="nav-link only-mobile" style="--i: 5">
            <a href="/contact" aria-label="Contact">Contact</a>
          </li>
          <li class="nav-link only-mobile" style="--i: 4">
            <a href="/products/exports" aria-label="Exports">Exports</a>
          </li>
          <li class="nav-link only-mobile" style="--i: 6">
            <a href="/products/changan" aria-label="Changan">Changan</a>
          </li>
          <!-- <li class="nav-link only-mobile" style="--i: 6">
            <a href="/waiting" aria-label="Real Estate">Real Estate</a>
          </li> -->
        </ul>
      </nav>
      <Button text="Get in touch" class="nav-button | btn-tertiary btn-white" />
    </div>

    <button class="nav-toggler">
      <span></span>
    </button>
  </div>
</header>

<script>
  const navToggler = document.querySelector(".nav-toggler") as HTMLElement;
  const navMenu = document.querySelector(".nav-links");
  const navLinks = document.querySelectorAll(".navbar a");
  allEventListners();

  function allEventListners() {
    navToggler.addEventListener("click", togglerClick);
    navLinks.forEach((elem) => elem.addEventListener("click", navLinkClick));
  }

  function togglerClick() {
    navToggler.classList.toggle("toggler-open");
    navMenu.classList.toggle("open");
  }

  function navLinkClick() {
    if (navMenu.classList.contains("open")) {
      navToggler.click();
    }
  }

  document.addEventListener("DOMContentLoaded", function () {
    const pages = window.location.pathname.split("/");
    const links = document.querySelectorAll("nav li a");
    const home = document.querySelector("a[data-page='home']");
    links.forEach((link) => {
      const linkPage = link.getAttribute("data-page");
      if (pages.includes(linkPage)) {
        link.classList.add("active");
        home.classList.remove("active");
      }
    });
  });
</script>
